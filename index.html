<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/style.css">
  <title>CHIP8 Emulator</title>
</head>
<body>
  <canvas id="cnv" ></canvas>

  <audio></audio>

  <script src="./js/chip8.js"></script>

  <script>

      let chip = new chip8()

      document.addEventListener('keydown', (e) => {
        chip.keys[chip.keyMap[e.keyCode]] = true
        chip.currentKey = chip.keyMap[e.keyCode]
      })

      document.addEventListener('keyup', (e) => {
        chip.keys[chip.keyMap[e.keyCode]] = false
        chip.currentKey = false
      })



      function loadRom(){
        let xhr = new XMLHttpRequest
        xhr.open('GET', './roms/tetris.ch8', true)
        xhr.responseType = 'arraybuffer'

        xhr.onload = function() {
          let rom = new Uint8Array(xhr.response)
          console.log(rom)
          chip.loadRom(rom)
        }

        xhr.send()
      }

      loadRom()

  </script>
</body>
</html>